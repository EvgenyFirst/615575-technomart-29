const buttonThatOpensTheForm=document.querySelector(".contacts-btn"),openForm=document.querySelector(".email-sending-form"),closeForm=openForm.querySelector(".email-sending-form-close-btn"),setFocusNameInput=openForm.querySelector(".email-sending-form-data"),validationForm=openForm.querySelector(".email-sending-form-main"),validationUserName=openForm.querySelector(".email-sending-form-user-name"),validationEmail=openForm.querySelector(".email-sending-form-validation");let isStorageSupport=!0,storage="";try{storage=localStorage.getItem("userName")}catch(e){isStorageSupport=!1}buttonThatOpensTheForm.addEventListener("click",function(e){e.preventDefault(),openForm.classList.add("email-sending-form-send-opened"),storage&&(validationUserName.value=storage),storage?(validationUserName.value=storage,setFocusNameInput.focus()):validationEmail.focus()}),closeForm.addEventListener("click",function(e){e.preventDefault(),openForm.classList.remove("email-sending-form-send-opened")}),validationForm.addEventListener("submit",function(e){validationUserName.value&&validationUserName.value?isStorageSupport&&localStorage.setItem("userName",validationUserName.value):(e.preventDefault(),openForm.classList.remove("email-sending-form-modal-error"),openForm.offsetWidth=openForm.offsetWidth,openForm.classList.add("email-sending-form-modal-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&openForm.classList.contains("email-sending-form-send-opened")&&(e.preventDefault(),openForm.classList.remove("email-sending-form-send-opened"),openForm.classList.remove("email-sending-form-modal-error"))});
